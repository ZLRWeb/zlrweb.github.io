---
slug: tech-summary-2025-07-11
title: TechSummary 2025-07-11
authors: openai
tags: [Java, Spring AI, Docker, GenAI, Testcontainers, Observability, Grafana]

---

# TechSummary 2025-07-11

## ç”¨ Java å’Œ Spring AI è¼•é¬†å»ºç«‹ Generative AI æ‡‰ç”¨ ğŸ› ï¸ğŸ¤–

**ä¾†æºï¼š** [Dockerå®˜æ–¹åšå®¢](https://www.docker.com/blog/build-genai-app-with-java-spring-ai-docker-model-runner/)

é€™ç¯‡æ–‡ç« ä»‹ç´¹å¦‚ä½•ä½¿ç”¨ Java å’Œ Spring AIï¼Œä¸éœ€å­¸ç¿’ Pythonï¼Œä¾¿èƒ½å¿«é€Ÿæ§‹å»ºæœ¬åœ°çš„ GenAI æ‡‰ç”¨ã€‚é‡é»åœ¨æ–¼æ•´åˆ Docker Model Runnerã€Testcontainers é€²è¡Œæœ¬åœ°æ¨¡å‹ç®¡ç†èˆ‡æ¸¬è©¦ï¼Œä¸¦åˆ©ç”¨ Grafana é€²è¡Œè§€æ¸¬ï¼Œæå‡é–‹ç™¼èˆ‡é‹ç¶­çš„æ•ˆç‡ã€‚

---

## å¦‚ä½•ä¸€æ­¥æ­¥å»ºç«‹ Java GenAI æ‡‰ç”¨ ğŸš€

- é¸æ“‡ Spring Initializr æ­é… Webã€OpenAIã€Qdrantå‘é‡è³‡æ–™åº«åŠ Testcontainersã€‚
- å»ºç«‹å…©å€‹ API ç«¯é»ï¼š`/chat` èˆ‡ `/rag`ï¼Œå‰è€…èˆ‡æ¨¡å‹äº¤äº’ï¼Œå¾Œè€…åŠ å…¥æ–‡ä»¶å…§å®¹å¢å¼·æ¨¡å‹å›ç­”ã€‚
- é…ç½® Docker Model Runnerï¼Œç”¨æ–¼åœ¨æœ¬åœ°é‹è¡Œæƒ…æ„Ÿæ¨¡å‹ï¼Œæ›¿ä»£é›²ç«¯æœå‹™ã€‚
- ä½¿ç”¨é è¨­æ¨¡å‹ `ai/llama3.1` åŠ embedding æ¨¡å‹ `ai/mxbai-embed-large`ã€‚

**é—œéµé»ï¼š**
- ç¯„ä¾‹ä¸­å»ºç«‹ä¸€å€‹ `ChatController`ï¼Œé€é `ChatClient` é€²è¡Œæ¨¡å‹äº’å‹•ã€‚
- `application.properties` é…ç½®æ¨¡å‹èˆ‡ API é‡‘é‘°ï¼ˆé›–ç„¶åœ¨ Docker æ¨¡å‹ä¸­ä¸éœ€å¯¦éš›é‡‘é‘°ï¼‰ã€‚
- é‹è¡ŒæŒ‡ä»¤ç¤ºç¯„ï¼š
  ```bash
  ./mvnw spring-boot:test-run
  ```
  ä¹‹å¾Œå‘ç«¯é»å‚³é€è«‹æ±‚ï¼Œä¾‹å¦‚ï¼š
  ```bash
  http :8080/chat message=="What's testcontainers?"
  ```
- LLM å›æ‡‰æœƒè§£é‡‹ Testcontainers çš„åŠŸèƒ½ï¼Œå¼·èª¿æ¨¡æ“¬å¯¦é«”æœå‹™çš„å„ªå‹¢ã€‚

---

## æ•´åˆ Testcontainers é€²è¡Œæ›´å¯é çš„æ¸¬è©¦ ğŸ”ğŸ§ª

- åˆ©ç”¨ Testcontainers æä¾›çš„çœŸæ­£æœå‹™å®¹å™¨ï¼ˆå¦‚ PostgreSQLã€MongoDBã€Kafkaï¼‰é€²è¡Œæ¸¬è©¦ï¼Œæé«˜æ¨¡æ“¬çœŸå¯¦ç’°å¢ƒçš„å¯é æ€§ã€‚
- ç¯„ä¾‹ï¼š
  ```python
  from testcontainers.postgresql import PostgreSQLEnvironment

  env = PostgreSQLEnvironment()
  env.start()
  db = env.db()
  # æ¸¬è©¦æ“ä½œ
  env.shutdown()
  ```
- æ–‡ç« æé†’æ¸¬è©¦æ™‚è‹¥ç”¨éŒ¯ APIï¼ˆå¦‚ `PostgreSQLEnvironment` ä¸å­˜åœ¨ï¼‰ï¼Œä»£è¡¨ç”¢ç”Ÿèª¤å°è³‡è¨Šï¼Œå¼·èª¿è³‡æ–™ä¾†æºè¦æ…é¸ã€‚

**æ”¹é€²æ–¹æ³•ï¼š**  
é€éå¯¦éš›çš„æ–‡ä»¶èˆ‡èªå¢ƒèª¿æ•´æ¨¡å‹å…§å®¹ï¼Œæå‡å›ç­”æº–ç¢ºåº¦ã€‚

- ç¯„ä¾‹ä¸­æ–°å¢ `RagController`ï¼Œçµåˆå‘é‡è³‡æ–™åº« `Qdrant` é€²è¡Œè³‡è¨Šæ“´å……ã€‚
- ä½¿ç”¨ Spring AI æä¾›çš„ `QuestionAnswerAdvisor`ï¼Œé€²è¡Œæ–‡ä»¶æŸ¥è©¢ä¸¦æä¾›ç²¾ç¢ºå›ç­”ã€‚

---

## æ–‡ä»¶å…§å®¹å°å…¥åŠè³‡æ–™åº«é…ç½® ğŸ“„ğŸ”§

- å»ºç«‹ `IngestionConfiguration`ï¼Œå°‡æ–‡ä»¶ï¼ˆå¦‚ `/src/test/resources/docs/testcontainers.txt`ï¼‰è®€å…¥ä¸¦åˆ†è©å­˜å…¥å‘é‡è³‡æ–™åº«ã€‚
- é…ç½® `application.properties`ï¼Œè¨­å®š embedding æ¨¡å‹ä»¥åŠè³‡æ–™åº«è³‡æ–™é›†ã€‚
- ç¯„ä¾‹å•å¥ï¼š
  ```bash
  /rag?message=What's Testcontainers?
  ```
  èƒ½å¾—åˆ°æ•´åˆæ–‡ä»¶è³‡è¨Šçš„æ›´ç²¾æº–å›ç­”ã€‚

---

## è‡ªå‹•åŒ–æ¸¬è©¦èˆ‡è§€æ¸¬ ğŸ“ˆğŸ–¥ï¸

- åˆ©ç”¨ `spring-boot-starter-actuator`ã€Micrometer åŠ OpenTelemetry å¯¦ç¾æŒ‡æ¨™å’Œè¿½è¹¤ã€‚
- æ¶è¨­ `GrafanaContainer`ï¼Œæ•´åˆ Prometheusã€Tempo èˆ‡ OpenTelemetryï¼Œå»ºç«‹ä¸€ç«™å¼è§€æ¸¬å¹³å°ã€‚
- ç›£æ¸¬æ¨¡å‹ç”¨é‡ã€å‘é‡æª¢ç´¢æ•ˆèƒ½èˆ‡è¿½è¹¤è«‹æ±‚æµç¨‹ã€‚

**ç¯„ä¾‹ï¼š**
- åŸ·è¡Œå¾Œæœƒå–å¾— Grafana çš„å­˜å–é€£çµï¼š
  ```
  http://localhost:64908
  ```
- å¯ä»¥åœ¨åœ–åƒä¸­çœ‹åˆ°ï¼š
  - æ¨¡å‹èˆ‡å‘é‡æœå°‹çš„æ€§èƒ½æŒ‡æ¨™
  - è«‹æ±‚è¿½è¹¤è©³æƒ…èˆ‡ä½¿ç”¨ç‹€æ³

---

## ç¸½çµå¿ƒå¾— ğŸ’¡

é€™æ¬¡å…§å®¹è­‰æ˜ Docker èˆ‡ Spring AI çµåˆï¼Œèƒ½æœ‰æ•ˆé™ä½æœ¬åœ°å»ºæ¨¡ã€æ¸¬è©¦èˆ‡é‹ç¶­çš„é–€æª»ã€‚  
- åˆ©ç”¨ Docker Model Runnerï¼Œå¿«é€Ÿå¯¦ç¾æœ¬åœ°æ¨¡å‹éƒ¨ç½²ï¼Œé¿å…é›²ç«¯ä¾è³´ã€‚  
- Testcontainers æå‡æ¸¬è©¦çš„ç¾å¯¦æ€§èˆ‡å¯é æ€§ï¼Œç¢ºä¿é–‹ç™¼æµç¨‹æ›´é †æš¢ã€‚  
- æ­é… Grafana çš„ observabilityï¼Œèƒ½å³æ™‚ç›£æ§æ‡‰ç”¨è¡¨ç¾ï¼Œæ˜¯ç¾ä»£ AI æ‡‰ç”¨ä¸€å€‹å®Œæ•´çš„è§£æ±ºæ–¹æ¡ˆã€‚

### æˆ‘çš„çœ‹æ³•

é€™ç¯‡æ–‡ç« å±•ç¾äº† Java ç”Ÿæ…‹ç³»çµ±åœ¨ AI é–‹ç™¼ä¸Šçš„æ½›åŠ›å’Œå½ˆæ€§ï¼Œç‰¹åˆ¥æ˜¯å°æ–¼å·²æœ‰ Java æŠ€è¡“å †ç–Šçš„åœ˜éšŠä¾†èªªï¼Œæ˜¯éå¸¸æ–¹ä¾¿ä¸”å¼·å¤§çš„æŠ€è¡“é¸æ“‡ã€‚æœªä¾†æœŸå¾…æ›´æ·±å…¥çš„ç¯„ä¾‹èˆ‡å¯¦éš›æ‡‰ç”¨æ¡ˆä¾‹ï¼Œå¹«åŠ©ä¼æ¥­æ›´å¿«é€Ÿè½åœ° AI è§£æ±ºæ–¹æ¡ˆã€‚

---

## åƒè€ƒè³‡æ–™

- [Dockerå®˜æ–¹æŠ€è¡“æ–‡ç« ](https://www.docker.com/blog/build-genai-app-with-java-spring-ai-docker-model-runner/)
- [Spring AIå®˜æ–¹æ–‡ä»¶](https://spring.io/projects/spring-ai)
- [Testcontainerså®˜æ–¹ç¶²ç«™](https://testcontainers.com/)
- [Grafanaå®˜æ–¹ç¶²ç«™](https://grafana.com/)

---